<% layout('./layouts/boilerplate') %>

<div class="row">
  <div class="col-6">
    <div class="card my-4">
      <div class="card-footer">
        <a href="/courses" class="card-link d-flex align-items-end">
          Back to all courses</a
        >
      </div>
      <img src="<%=course.image %>" class="card-img-top" alt="..." />
      <div class="card-body">
        <h5 class="card-title"><%=course.title %></h5>
        <p class="card-text"><%=course.description %></p>
      </div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item text-muted"><%=course.location %></li>
        <li class="list-group-item">$ <%=course.price %>.00 /round</li>
        <li class="list-group-item">
          <a href="#" class="card-link">Website</a>
        </li>
      </ul>
      <div class="d-grid gap-2 d-md-flex justify-content-md-end p-3">
        <a
          class="btn btn-info"
          href="/courses/<%= course._id %>/edit"
          class="card-link"
          >Edit</a
        >

        <form
          class="card-link d-inline"
          action="/courses/<%= course._id %>?_method=DELETE"
          method="POST"
        >
          <button class="btn btn-danger ml-2">Remove</button>
        </form>
      </div>
    </div>
  </div>
  <div class="col-6">
    <div class="review my-4">
      <h4>Leave a Review</h4>

      <form
        class="mb-4 validated-form"
        action="/courses/<%=course._id%>/reviews"
        method="POST"
        novalidate
      >
        <div class="mb-3">
          <label class="form-label" for="rating" id="rating">Rating</label>
          <input
            class="form-range"
            type="range"
            min="1"
            max="5"
            name="review[rating]"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label" for="body">Review </label>
          <textarea
            class="form-control"
            name="review[body]"
            id="body"
            cols="30"
            rows="3"
            required
            placeholder="write review"
          ></textarea>
          <div class="invalid-feedback text-end">Cannot be blank</div>
        </div>
        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
          <button class="btn btn-info">Submit</button>
        </div>
      </form>
      <h4>Reviews</h4>
      <% for (let review of course.reviews) {%>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">rating: <%= review.rating%></h5>

          <p class="card-text">review: <%= review.body%></p>
        </div>
        <div class="d-grid d-flex justify-content-end">
          <form
            class="card-link d-inline"
            action="/courses/<%= course._id %>/reviews/<%=review._id%>?_method=DELETE"
            method="POST"
          >
            <button class="btn btn-danger m-2">Remove</button>
          </form>
        </div>
      </div>
      <% }%>
    </div>
  </div>
</div>

<!-- <h1>show page</h1> -->
<!-- <h2><%=course.title %></h2>
<h3><%=course.location %></h3>
<img src="<%=course.image %>" alt="" class="figure-img img-fluid rounded" />
<p><%=course.description%></p>
<p>$ <%=course.price%>.00</p>
<footer>
  <button><a href="/courses/<%= course._id %>/edit">Edit</a></button>

  <form action="/courses/<%= course._id %>?_method=DELETE" method="POST">
    <button>Remove</button>
  </form>

  <button><a href="/courses">All Courses</a></button>
</footer> -->
